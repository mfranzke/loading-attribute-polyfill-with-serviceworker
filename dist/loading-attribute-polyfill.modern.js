const e="loading"in HTMLImageElement.prototype,t="loading"in HTMLIFrameElement.prototype;let o;function a(e){return e.replace(/(&|&amp;)?(loading=lazy|image-width=\d*|image-height=\d*)/gi,"")}function r(e){let t=[e];"picture"===e.parentNode.tagName.toLowerCase()&&(t=Array.prototype.slice.call(e.parentNode.querySelectorAll("source"))),t.push(e),t.forEach(e=>{e.hasAttribute("srcset")&&(e.srcset=a(e.srcset)),e.src=a(e.src),e.dataset.loadingLazy="loading"})}function n(a){var n,i,d;if(("img"===(null==(n=a.tagName)?void 0:n.toLowerCase())||"picture"===(null==(i=a.tagName)?void 0:i.toLowerCase()))&&!e||"iframe"===(null==(d=a.tagName)?void 0:d.toLowerCase())&&!t)if(void 0!==o){const e=a;e.dataset.loadingLazy="registered",o.observe(e)}else r(a)}window,window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"IntersectionObserver"in window&&(o=new IntersectionObserver(function(e,t){e.forEach(e=>{if(0===e.intersectionRatio)return;const o=e.target;t.unobserve(o),r(o)})},{rootMargin:"0px 0px 256px 0px",threshold:.01}));const i=()=>{document.querySelectorAll('img[loading="lazy"],iframe[loading="lazy"]').forEach(e=>n(e)),void 0!==window.matchMedia&&window.matchMedia("print").addListener(e=>{e.matches&&document.querySelectorAll('img[loading="lazy"],iframe[loading="lazy"]').forEach(e=>{r(e)})})};/comp|inter/.test(document.readyState)?i():"addEventListener"in document?document.addEventListener("DOMContentLoaded",()=>{i()}):document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&i()});const d={prepareElement:n};export{d as default};
//# sourceMappingURL=loading-attribute-polyfill.modern.js.map

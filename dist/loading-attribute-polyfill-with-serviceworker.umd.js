!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e||self).loadingAttributePolyfillWithServiceworker=t()}(this,function(){const e='img[loading="lazy"]',t='iframe[loading="lazy"]',o="loading"in HTMLImageElement.prototype,n="loading"in HTMLIFrameElement.prototype;let r;function i(e){return e.replace(/(&|&amp;)?(loading=lazy|image-width=\d*|image-height=\d*)/gi,"")}function a(e){let t=[e];"picture"===e.parentNode.tagName.toLowerCase()&&(t=Array.prototype.slice.call(e.parentNode.querySelectorAll("source"))),t.push(e);for(const e of t)e.hasAttribute("srcset")&&(e.srcset=i(e.srcset)),e.src=i(e.src),e.dataset.loadingLazy="loading"}function d(e){var t,i;if("img"===(null==(t=e.tagName)?void 0:t.toLowerCase())&&!o||"iframe"===(null==(i=e.tagName)?void 0:i.toLowerCase())&&!n)if(void 0===r)a(e);else{const t=e;t.dataset.loadingLazy="registered",r.observe(t)}}window,window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"IntersectionObserver"in window&&(r=new IntersectionObserver(function(e,t){for(const o of e){if(0===o.intersectionRatio)continue;const e=o.target;t.unobserve(e),a(e)}},{rootMargin:"0px 0px 256px 0px",threshold:.01}));const c=()=>{for(const o of document.querySelectorAll(e+","+t))d(o);void 0!==window.matchMedia&&window.matchMedia("print").addListener(o=>{if(o.matches)for(const o of document.querySelectorAll(e+","+t))a(o)})};return/comp|inter/.test(document.readyState)?c():"addEventListener"in document?document.addEventListener("DOMContentLoaded",()=>{c()}):document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),{prepareElement:d}});
//# sourceMappingURL=loading-attribute-polyfill-with-serviceworker.umd.js.map

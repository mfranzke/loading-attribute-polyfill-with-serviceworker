const e="loading"in HTMLImageElement.prototype,t="loading"in HTMLIFrameElement.prototype;let o;function n(e){return e.replace(/(&|&amp;)?(loading=lazy|image-width=\d*|image-height=\d*)/gi,"")}function a(e){let t=[e];"picture"===e.parentNode.tagName.toLowerCase()&&(t=Array.prototype.slice.call(e.parentNode.querySelectorAll("source"))),t.push(e);for(const e of t)e.hasAttribute("srcset")&&(e.srcset=n(e.srcset)),e.src=n(e.src),e.dataset.loadingLazy="loading"}function r(n){var r,i;if("img"===(null==(r=n.tagName)?void 0:r.toLowerCase())&&!e||"iframe"===(null==(i=n.tagName)?void 0:i.toLowerCase())&&!t)if(void 0===o)a(n);else{const e=n;e.dataset.loadingLazy="registered",o.observe(e)}}window,window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"IntersectionObserver"in window&&(o=new IntersectionObserver(function(e,t){for(const o of e){if(0===o.intersectionRatio)continue;const e=o.target;t.unobserve(e),a(e)}},{rootMargin:"0px 0px 256px 0px",threshold:.01}));const i=()=>{for(const e of document.querySelectorAll('img[loading="lazy"],iframe[loading="lazy"]'))r(e);void 0!==window.matchMedia&&window.matchMedia("print").addListener(e=>{if(e.matches)for(const e of document.querySelectorAll('img[loading="lazy"],iframe[loading="lazy"]'))a(e)})};/comp|inter/.test(document.readyState)?i():"addEventListener"in document?document.addEventListener("DOMContentLoaded",()=>{i()}):document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&i()}),module.exports={prepareElement:r};
//# sourceMappingURL=loading-attribute-polyfill-with-serviceworker.js.map

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e||self).loadingAttributePolyfillWithServiceworker=t()}(this,function(){const e='img[loading="lazy"]',t='iframe[loading="lazy"]',o="loading"in HTMLImageElement.prototype,n="loading"in HTMLIFrameElement.prototype;let r;function a(e){return e.replace(/(&|&amp;)?(loading=lazy|image-width=\d*|image-height=\d*)/gi,"")}function i(e){let t=[e];"picture"===e.parentNode.tagName.toLowerCase()&&(t=Array.prototype.slice.call(e.parentNode.querySelectorAll("source"))),t.push(e),t.forEach(e=>{e.hasAttribute("srcset")&&(e.srcset=a(e.srcset)),e.src=a(e.src),e.dataset.loadingLazy="loading"})}function d(e){var t,a,d;if(("img"===(null==(t=e.tagName)?void 0:t.toLowerCase())||"picture"===(null==(a=e.tagName)?void 0:a.toLowerCase()))&&!o||"iframe"===(null==(d=e.tagName)?void 0:d.toLowerCase())&&!n)if(void 0!==r){const t=e;t.dataset.loadingLazy="registered",r.observe(t)}else i(e)}window,window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"IntersectionObserver"in window&&(r=new IntersectionObserver(function(e,t){e.forEach(e=>{if(0===e.intersectionRatio)return;const o=e.target;t.unobserve(o),i(o)})},{rootMargin:"0px 0px 256px 0px",threshold:.01}));const c=()=>{document.querySelectorAll(e+","+t).forEach(e=>d(e)),void 0!==window.matchMedia&&window.matchMedia("print").addListener(o=>{o.matches&&document.querySelectorAll(e+","+t).forEach(e=>{i(e)})})};return/comp|inter/.test(document.readyState)?c():"addEventListener"in document?document.addEventListener("DOMContentLoaded",()=>{c()}):document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),{prepareElement:d}});
//# sourceMappingURL=loading-attribute-polyfill.umd.js.map
